

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  <meta content="A guide on Jina Flow Evaluation Mode" name="description" />
<meta content="Jina, Flow evaluation" name="keywords" />

  <meta name="X-UA-Compatible" content="IE=edge">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:title" content="Jina Documentation">
<meta property="og:description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:url" content="https://opensource.jina.ai">
<meta property="og:image" content="../../_static/banner.png">
<meta property="og:type" content="website">
<link rel="icon" href="../../_static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Evaluating a Flow &mdash; Jina 2.0.0rc5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/main.css" type="text/css" />


  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Optimizing a Flow" href="../optimization/" />
    <link rel="prev" title="Rolling Updates and Query While Indexing in Jina" href="../dump-reload/" /> 
</head>

<body class="wy-body-for-nav">
  <div id="showhide-navbar-btn" onclick="showhide_navbar();"></div>

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://docs.jina.ai">
          

          
            
            <img src="../../_static/jina-prod-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            

          <div class="dropdown version">
            <button class="dropbtn version">2.0.0rc5</button>
            <div class="dropdown-content">
              
              <a class="dropdown-item" href="/master">master</a>
              
              <a class="dropdown-item" href="/v1.3.0">1.3.0</a>
              
              <a class="dropdown-item" href="/v1.2.4">1.2.4</a>
              
              <a class="dropdown-item" href="/v1.2.2">1.2.2</a>
              
              <a class="dropdown-item" href="/v1.2.1">1.2.1</a>
              
              <a class="dropdown-item" href="/v1.1.9">1.1.9</a>
              
              <a class="dropdown-item" href="/v1.1.8">1.1.8</a>
              
              <a class="dropdown-item" href="/v1.1.7">1.1.7</a>
              
              <a class="dropdown-item" href="/v1.1.6">1.1.6</a>
              
              <a class="dropdown-item" href="/v1.1.5">1.1.5</a>
              
              <a class="dropdown-item" href="/v1.1.4">1.1.4</a>
              
              <a class="dropdown-item" href="/v1.1.3">1.1.3</a>
              
              <a class="dropdown-item" href="/v1.1.2">1.1.2</a>
              
              <a class="dropdown-item" href="/v1.1.1">1.1.1</a>
              
              <a class="dropdown-item" href="/v1.1.0">1.1.0</a>
              
              <a class="dropdown-item" href="/v1.0.9">1.0.9</a>
              
              <a class="dropdown-item" href="/v1.0.7">1.0.7</a>
              
              <a class="dropdown-item" href="/v1.0.6">1.0.6</a>
              
              <a class="dropdown-item" href="/v1.0.5">1.0.5</a>
              
              <a class="dropdown-item" href="/v1.0.4">1.0.4</a>
              
              <a class="dropdown-item" href="/v1.0.3">1.0.3</a>
              
              <a class="dropdown-item" href="/v1.0.2">1.0.2</a>
              
              <a class="dropdown-item" href="/v1.0.1">1.0.1</a>
              
              <a class="dropdown-item" href="/v1.0.0">1.0.0</a>
              
              <a class="dropdown-item" href="/v0.9.8">0.9.8</a>
              
              <a class="dropdown-item" href="/v0.9.7">0.9.7</a>
              
              <a class="dropdown-item" href="/v0.9.6">0.9.6</a>
              
              <a class="dropdown-item" href="/v0.9.5">0.9.5</a>
              
              <a class="dropdown-item" href="/v0.9.4">0.9.4</a>
              
              <a class="dropdown-item" href="/v0.9.34">0.9.34</a>
              
              <a class="dropdown-item" href="/v0.9.33">0.9.33</a>
              
              <a class="dropdown-item" href="/v0.9.3">0.9.3</a>
              
              <a class="dropdown-item" href="/v0.9.28">0.9.28</a>
              
              <a class="dropdown-item" href="/v0.9.23">0.9.23</a>
              
              <a class="dropdown-item" href="/v0.9.22">0.9.22</a>
              
              <a class="dropdown-item" href="/v0.9.21">0.9.21</a>
              
              <a class="dropdown-item" href="/v0.9.20">0.9.20</a>
              
              <a class="dropdown-item" href="/v0.9.19">0.9.19</a>
              
              <a class="dropdown-item" href="/v0.9.18">0.9.18</a>
              
              <a class="dropdown-item" href="/v0.9.17">0.9.17</a>
              
              <a class="dropdown-item" href="/v0.9.16">0.9.16</a>
              
              <a class="dropdown-item" href="/v0.9.15">0.9.15</a>
              
              <a class="dropdown-item" href="/v0.9.14">0.9.14</a>
              
              <a class="dropdown-item" href="/v0.9.13">0.9.13</a>
              
              <a class="dropdown-item" href="/v0.9.12">0.9.12</a>
              
              <a class="dropdown-item" href="/v0.9.11">0.9.11</a>
              
              <a class="dropdown-item" href="/v0.9.10">0.9.10</a>
              
              <a class="dropdown-item" href="/v0.9.9">0.9.9</a>
              
              <a class="dropdown-item" href="/v0.9.8">0.9.8</a>
              
              <a class="dropdown-item" href="/v0.9.7">0.9.7</a>
              
              <a class="dropdown-item" href="/v0.9.6">0.9.6</a>
              
              <a class="dropdown-item" href="/v0.9.5">0.9.5</a>
              
              <a class="dropdown-item" href="/v0.9.3">0.9.3</a>
              
              <a class="dropdown-item" href="/v0.9.2">0.9.2</a>
              
              <a class="dropdown-item" href="/v0.9.1">0.9.1</a>
              
              <a class="dropdown-item" href="/v0.9.0">0.9.0</a>
              
              <a class="dropdown-item" href="/v0.8.22">0.8.22</a>
              
              <a class="dropdown-item" href="/v0.8.21">0.8.21</a>
              
            </div>
          </div>
            
          


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Jina Core</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../core/guides/">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/setup/">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_first_jina_app/">Building Your First Jina App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/ide-speedup/">Speeding Up Development in PyCharm and VSCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../primitive_data_type/">Primitive Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mime-type/">MIME Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../traversal/">Recursive Document Representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executors/">Processing Documents with Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simple_exec/">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">uses</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend/executor/">Adding New Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peas-and-pods/">Peas and Pods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend/driver/">Adding New Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/">Composing a Search Workflow with the Flow API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input_output/">Inputs and Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crud/">CRUD Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cross_multi_modality/">Multi-modal and Cross-modal Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sparse/">Using Sparse Embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/">Configuring Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/exit/">Exiting a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dump-reload/">Rolling Updates and Query While Indexing in Jina</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Evaluating a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization/">Optimizing a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ranker/">Ranking Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ranker_trainer/">A guide on Jina Ranker Trainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prevent_duplicate_indexing/">Preventing Duplicate Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incremental_indexing/">Incremental Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel/">Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../batching/">Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../request_size/">Request Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="../remote/">Distributing Jina Remotely</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stress/">Cloud Benchmark &amp; Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../envs/">OS Environment Variables Used in Jina</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/pattern/">Common Design Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autocomplete/">Autocomplete commands on Bash, Zsh and Fish</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core/api_references/">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Dashboard</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/guides/">Developer Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Hub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hub/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hub/guides/">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hub/api_references/">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Box</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../box/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../box/guides/">Developer Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary/">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/">Contributing to Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/#join-us-on-slack">Join Us on Slack!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE/">Release &amp; Version Identifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Change Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jep/">Jina Enhancement Proposals (JEP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/dev/">FAQ for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/user/">FAQ for End-Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docstring/">Docstring Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../all_exec/">List of 123 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../all_driver/">List of 62 Drivers in Jina</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Jina</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation" class="nav-bar-header">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../core/guides/">Developer Guides</a> &raquo;</li>
        
      <li>Evaluating a Flow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  
<div role="search" class="nav-bar-search">
  <form id="rtd-search-form" class="wy-form doc-searchbox" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs (Press / to focus)" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

</div>
<hr/>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="evaluating-a-flow">
<h1><a class="toc-backref" href="#id2">Evaluating a Flow</a><a class="headerlink" href="#evaluating-a-flow" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide assumes you have a basic understanding of Jina, if you haven’t, please check out <a class="reference external" href="https://101.jina.ai">Jina 101</a> first.</p>
</div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#evaluating-a-flow" id="id2">Evaluating a Flow</a></p>
<ul>
<li><p><a class="reference internal" href="#motivation" id="id3">Motivation</a></p></li>
<li><p><a class="reference internal" href="#before-you-start" id="id4">Before you start</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id5">Overview</a></p></li>
<li><p><a class="reference internal" href="#evaluation-in-action" id="id6">Evaluation in action</a></p></li>
<li><p><a class="reference internal" href="#conclusion" id="id7">Conclusion</a></p></li>
<li><p><a class="reference internal" href="#what-s-next" id="id8">What’s next</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="motivation">
<h2><a class="toc-backref" href="#id3">Motivation</a><a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>In Jina, just like in any search system, it’s critical to measure system performance.</p>
<p>Generally, evaluation is about computing the difference between an output and ideal results,
users generally place an emphasis on evaluating final document ranking results using information retrieval metrics,
such as Precision, Recall, mAP or nDCG.
However, it ignores the fact that a search system is often composed of multiple components,
whereas evaluation on the final results hardly reveals useful insights about the system. Jina allows the user
to evaluate any part of the system using arbitrary metrics.</p>
</div>
<div class="section" id="before-you-start">
<h2><a class="toc-backref" href="#id4">Before you start</a><a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h2>
<p>We expect you have a clean Python 3.7/3.8/3.9 (virtual) environment.
Install Jina on your machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U jina
</pre></div>
</div>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id5">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>To achieve our objective, Jina has a family of <a class="reference internal" href="../glossary/#term-Executor"><span class="xref std std-term">Executor</span></a> named <a class="reference internal" href="../glossary/#term-Evaluator"><span class="xref std std-term">Evaluator</span></a>.
These Evaluators capture and evaluate Documents from any part of the Flow.</p>
<p>As a new type of <a class="reference internal" href="../glossary/#term-Executor"><span class="xref std std-term">Executor</span></a>, Evaluators inspect Documents from the request and compare them with GroundTruth.
The Executor can be wrapped in a <a class="reference internal" href="../glossary/#term-Pod"><span class="xref std std-term">Pod</span></a> and placed anywhere in the <a class="reference internal" href="../glossary/#term-Flow"><span class="xref std std-term">Flow</span></a>.
They tend to be placed after the <a class="reference internal" href="../glossary/#term-Pod"><span class="xref std std-term">Pod</span></a> applying the transformation that wants to be evaluated by the specific <cite>Evaluator</cite>.</p>
<p>In order to be able to Evaluate the performance of a transformation applied to a Document by any part of a Jina
<a class="reference internal" href="../glossary/#term-Flow"><span class="xref std std-term">Flow</span></a>, we need to know what the desired state of the <a class="reference internal" href="../glossary/#term-Document"><span class="xref std std-term">Document</span></a> is. This desired state is called
<span class="xref std std-term">GroundTruth</span> and can be passed in Jina in every <code class="docutils literal notranslate"><span class="pre">IndexRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">SearchRequest</span></code>. This <span class="xref std std-term">GroundTruth</span>
in Jina is nothing else than another <a class="reference internal" href="../glossary/#term-Document"><span class="xref std std-term">Document</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">IndexRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">SearchRequest</span></code> are formed by streams of pairs and <cite>Documents</cite> and <cite>GroundTruths</cite>. When no evaluation
is involved, <cite>GroundTruth</cite> tends to be empty, however when an <cite>Evaluation</cite> pod is involved in the Flow, it will actually
take the information of every <cite>GroundTruth</cite> to feed both <cite>Document</cite> and <cite>GroundTruth</cite> information to the Evaluator <a class="reference internal" href="../glossary/#term-Executor"><span class="xref std std-term">Executor</span></a></p>
<p>Evaluation consists of extraction and evaluation.
In Jina, a <a class="reference internal" href="../glossary/#term-Driver"><span class="xref std std-term">Driver</span></a> extracts Document and GroundTruth information from a <a class="reference internal" href="../glossary/#term-Protobuf"><span class="xref std std-term">Protobuf</span></a> message,
and passes this information to the Executor.
The second steps happens inside the Executor: evaluate the difference between these two documents into a score.
Afterwards, the <a class="reference internal" href="../glossary/#term-Driver"><span class="xref std std-term">Driver</span></a> will add the results of the evaluation into the <cite>evaluations</cite> field of the <cite>Document</cite>.</p>
<p>Since Evaluation tends to focus only on some small parts of the <cite>Documents</cite> (IDs of the matches when evaluating Rankers,
embedding when evaluating Encoders),
GroundTruth does not need to contain more information from the Document than will be used by the Evaluator.</p>
<p>It is important to note that the Documents inside the <cite>IndexRequest</cite> and <cite>SerchRequest</cite> are transformed by the <cite>Drivers</cite>
inside the Flow while GroundTruth never changes, since is only used to analyze and compare to its paired <cite>Document</cite>
at any point of the Flow.</p>
<p>Currently, Evaluators can be categorised into <strong>ranking Evaluator</strong>, <strong>text Evaluator</strong> and <strong>embedding Evaluator</strong>,
but these can be extended to evaluate any kind of information inside a Document.</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Jina Evaluator Types</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ranking Evaluator</p></td>
<td><p>Precision, Recall, F1, aP, nDCG, mRR</p></td>
<td><p>Evaluate messages coming out from Indexers and Rankers and compares matches with GroundTruth</p></td>
</tr>
<tr class="row-odd"><td><p>Text Evaluator</p></td>
<td><p>Length, Bleu, Edit Distance, Gleu, Hamming Distance, Jaccard Distance</p></td>
<td><p>Evaluates the difference between actual and desired text</p></td>
</tr>
<tr class="row-even"><td><p>Embedding Evaluator</p></td>
<td><p>Cosine Distance, Euclidean Distance, L1 Norm, Minkowski Distance</p></td>
<td><p>Evaluates the difference between actual and desired embeddings</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="evaluation-in-action">
<h2><a class="toc-backref" href="#id6">Evaluation in action</a><a class="headerlink" href="#evaluation-in-action" title="Permalink to this headline">¶</a></h2>
<p>Evaluation works in parallel with <code class="docutils literal notranslate"><span class="pre">IndexRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">SearchRequest</span></code>.</p>
<p>While <cite>Evaluation</cite> <span class="xref std std-term">Pods</span> can be added at arbitrary points of the Flow like any other Pods,
the Flow API <code class="xref py py-meth docutils literal notranslate"><span class="pre">inspect()</span></code> allows users to add pods with close to zero-overhead with the rest of the Flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">inspect</span><span class="o">=</span><span class="s1">&#39;HANG&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!BaseCrafter&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;crafter&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!BaseEncoder&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;encoder&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!BaseEmbeddingEvaluator&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;embed_eval&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!CompoundIndexer&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;indexer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!BaseRanker&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ranker&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;!BaseRankingEvaluator&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;rank_eval&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/hang.svg" src="../../_images/hang.svg" /><p>The above example shows how the evaluation Pods are introduced using <code class="xref py py-meth docutils literal notranslate"><span class="pre">inspect()</span></code> without introducing any side-effect to the Flow.</p>
<ol class="arabic simple">
<li><p>The evaluations are running as <em>side task</em> in parallel. They deviate from the main task and are not required to complete the request. Thus, it won’t slow down the Flow on the main task.</p></li>
<li><p>Attaching an inspect Pod to the Flow does not change the socket type between the original Pod and its neighbours.</p></li>
<li><p>All inspect Pods can be removed from the Flow by setting <code class="docutils literal notranslate"><span class="pre">Flow(inspect='REMOVE')</span></code>.</p></li>
</ol>
<p>You might noticed that we defined <code class="docutils literal notranslate"><span class="pre">Flow(inspect='HANG')</span></code> in the above code example as inspect type.
The <code class="xref py py-class docutils literal notranslate"><span class="pre">FlowInspectType</span></code> has three types: <code class="docutils literal notranslate"><span class="pre">HANG</span></code>, <code class="docutils literal notranslate"><span class="pre">COLLECT</span></code> and <code class="docutils literal notranslate"><span class="pre">REMOVE</span></code>.
The differences are shown in the figures below:</p>
<p><code class="docutils literal notranslate"><span class="pre">Flow(inspect='HANG')</span></code></p>
<img alt="../../_images/hang.svg" src="../../_images/hang.svg" /><p><code class="docutils literal notranslate"><span class="pre">Flow(inspect='COLLECT')</span></code></p>
<img alt="../../_images/collect.svg" src="../../_images/collect.svg" /><p><code class="docutils literal notranslate"><span class="pre">Flow(inspect='REMOVE')</span></code></p>
<img alt="../../_images/remove.svg" src="../../_images/remove.svg" /></div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#id7">Conclusion</a><a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>In this guide, we introduced why we need Jina Evaluators,
how we organize Jina Evaluators.
Apart from that, we gave some concrete examples of how to use Jina Evaluators.</p>
</div>
<div class="section" id="what-s-next">
<h2><a class="toc-backref" href="#id8">What’s next</a><a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
<p>If you still have questions, feel free to <a class="reference external" href="https://github.com/jina-ai/jina/issues">submit an issue</a> or post a message in our <a class="reference external" href="https://slack.jina.ai">community slack channel</a> .</p>
<p>To gain a deeper knowledge on the implementation of Jina Evaluators, you can find the source code <a class="reference external" href="https://github.com/jina-ai/jina/tree/master/jina/executors/evaluators">here</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        <a href="../optimization/" class="btn btn-neutral float-right" title="Optimizing a Flow"
           accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
        
        
        <a href="../dump-reload/" class="btn btn-neutral float-left" title="Rolling Updates and Query While Indexing in Jina"
           accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
        
    </div>
    

    <hr/>

    <div role="contentinfo">
        <nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">

            <ul class="devsite-footer-linkboxes-list">

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Stay connected</h3>
                    <ul class="devsite-footer-linkbox-list">

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                <i class="fab fa-github"></i> GitHub

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.linkedin.com/company/jinaai/" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                <i class="fab fa-linkedin"></i> LinkedIn

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://twitter.com/JinaAI_" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-twitter"></i> Twitter

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.youtube.com/c/JinaAI" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                <i class="fab fa-youtube"></i> YouTube

                            </a>

                        </li>

                    </ul>
                </li>

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
                    <ul class="devsite-footer-linkbox-list">
                        <li class="devsite-footer-linkbox-item">

                            <a href="https://slack.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-slack"></i> Slack community

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/issues"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                Issue tracker

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/blob/master/CHANGELOG.md"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                Release notes

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://career.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                Career@Jina AI

                            </a>

                        </li>


                    </ul>
                </li>

            </ul>

        </nav>
        <p>
            
            &copy; Copyright Jina AI Limited. All rights reserved.
            <span class="lastupdated">
        Last updated on Jun 10, 2021.
      </span>

        </p>
    </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });

      function showhide_navbar() {
      var x = document.getElementsByClassName("wy-nav-side")[0];
      var y = document.getElementsByClassName("wy-nav-content-wrap")[0];
      var z = document.getElementById("showhide-navbar-btn");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.style.marginLeft = "300px";
        z.style.left = "300px";
      } else {
        x.style.display = "none";
        y.style.marginLeft = "0";
        z.style.left = "0px";
      }
    }

  </script>

  <!-- Search box becomes active when you press the slash(/) key anywhere on the page-->
  <script>
    const body = document.querySelector('body');
    const searchBox = document.querySelector('form').querySelector('input[type="text"]');

    body.addEventListener('keyup', event => {
      event.preventDefault()
      if (event.key === '/') {
        searchBox.focus();
      }
    });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-164627626-3', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>
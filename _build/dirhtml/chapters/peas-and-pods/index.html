

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  <meta content="Development Guide: Peas and Pods in Jina" name="description" />
<meta content="Jina, pea, pod" name="keywords" />

  <meta name="X-UA-Compatible" content="IE=edge">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:title" content="Jina Documentation">
<meta property="og:description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:url" content="https://opensource.jina.ai">
<meta property="og:image" content="../../_static/banner.png">
<meta property="og:type" content="website">
<link rel="icon" href="../../_static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Peas and Pods &mdash; Jina 2.0.0rc5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/main.css" type="text/css" />


  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Adding New Drivers" href="../extend/driver/" />
    <link rel="prev" title="Adding New Executors" href="../extend/executor/" /> 
</head>

<body class="wy-body-for-nav">
  <div id="showhide-navbar-btn" onclick="showhide_navbar();"></div>

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://docs.jina.ai">
          

          
            
            <img src="../../_static/jina-prod-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            

          <div class="dropdown version">
            <button class="dropbtn version">2.0.0rc5</button>
            <div class="dropdown-content">
              
              <a class="dropdown-item" href="/master">master</a>
              
              <a class="dropdown-item" href="/v1.3.0">1.3.0</a>
              
              <a class="dropdown-item" href="/v1.2.4">1.2.4</a>
              
              <a class="dropdown-item" href="/v1.2.2">1.2.2</a>
              
              <a class="dropdown-item" href="/v1.2.1">1.2.1</a>
              
              <a class="dropdown-item" href="/v1.1.9">1.1.9</a>
              
              <a class="dropdown-item" href="/v1.1.8">1.1.8</a>
              
              <a class="dropdown-item" href="/v1.1.7">1.1.7</a>
              
              <a class="dropdown-item" href="/v1.1.6">1.1.6</a>
              
              <a class="dropdown-item" href="/v1.1.5">1.1.5</a>
              
              <a class="dropdown-item" href="/v1.1.4">1.1.4</a>
              
              <a class="dropdown-item" href="/v1.1.3">1.1.3</a>
              
              <a class="dropdown-item" href="/v1.1.2">1.1.2</a>
              
              <a class="dropdown-item" href="/v1.1.1">1.1.1</a>
              
              <a class="dropdown-item" href="/v1.1.0">1.1.0</a>
              
              <a class="dropdown-item" href="/v1.0.9">1.0.9</a>
              
              <a class="dropdown-item" href="/v1.0.7">1.0.7</a>
              
              <a class="dropdown-item" href="/v1.0.6">1.0.6</a>
              
              <a class="dropdown-item" href="/v1.0.5">1.0.5</a>
              
              <a class="dropdown-item" href="/v1.0.4">1.0.4</a>
              
              <a class="dropdown-item" href="/v1.0.3">1.0.3</a>
              
              <a class="dropdown-item" href="/v1.0.2">1.0.2</a>
              
              <a class="dropdown-item" href="/v1.0.1">1.0.1</a>
              
              <a class="dropdown-item" href="/v1.0.0">1.0.0</a>
              
              <a class="dropdown-item" href="/v0.9.8">0.9.8</a>
              
              <a class="dropdown-item" href="/v0.9.7">0.9.7</a>
              
              <a class="dropdown-item" href="/v0.9.6">0.9.6</a>
              
              <a class="dropdown-item" href="/v0.9.5">0.9.5</a>
              
              <a class="dropdown-item" href="/v0.9.4">0.9.4</a>
              
              <a class="dropdown-item" href="/v0.9.34">0.9.34</a>
              
              <a class="dropdown-item" href="/v0.9.33">0.9.33</a>
              
              <a class="dropdown-item" href="/v0.9.3">0.9.3</a>
              
              <a class="dropdown-item" href="/v0.9.28">0.9.28</a>
              
              <a class="dropdown-item" href="/v0.9.23">0.9.23</a>
              
              <a class="dropdown-item" href="/v0.9.22">0.9.22</a>
              
              <a class="dropdown-item" href="/v0.9.21">0.9.21</a>
              
              <a class="dropdown-item" href="/v0.9.20">0.9.20</a>
              
              <a class="dropdown-item" href="/v0.9.19">0.9.19</a>
              
              <a class="dropdown-item" href="/v0.9.18">0.9.18</a>
              
              <a class="dropdown-item" href="/v0.9.17">0.9.17</a>
              
              <a class="dropdown-item" href="/v0.9.16">0.9.16</a>
              
              <a class="dropdown-item" href="/v0.9.15">0.9.15</a>
              
              <a class="dropdown-item" href="/v0.9.14">0.9.14</a>
              
              <a class="dropdown-item" href="/v0.9.13">0.9.13</a>
              
              <a class="dropdown-item" href="/v0.9.12">0.9.12</a>
              
              <a class="dropdown-item" href="/v0.9.11">0.9.11</a>
              
              <a class="dropdown-item" href="/v0.9.10">0.9.10</a>
              
              <a class="dropdown-item" href="/v0.9.9">0.9.9</a>
              
              <a class="dropdown-item" href="/v0.9.8">0.9.8</a>
              
              <a class="dropdown-item" href="/v0.9.7">0.9.7</a>
              
              <a class="dropdown-item" href="/v0.9.6">0.9.6</a>
              
              <a class="dropdown-item" href="/v0.9.5">0.9.5</a>
              
              <a class="dropdown-item" href="/v0.9.3">0.9.3</a>
              
              <a class="dropdown-item" href="/v0.9.2">0.9.2</a>
              
              <a class="dropdown-item" href="/v0.9.1">0.9.1</a>
              
              <a class="dropdown-item" href="/v0.9.0">0.9.0</a>
              
              <a class="dropdown-item" href="/v0.8.22">0.8.22</a>
              
              <a class="dropdown-item" href="/v0.8.21">0.8.21</a>
              
            </div>
          </div>
            
          


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Jina Core</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../core/guides/">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/setup/">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_first_jina_app/">Building Your First Jina App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/ide-speedup/">Speeding Up Development in PyCharm and VSCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../primitive_data_type/">Primitive Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mime-type/">MIME Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../traversal/">Recursive Document Representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executors/">Processing Documents with Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simple_exec/">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">uses</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend/executor/">Adding New Executors</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Peas and Pods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend/driver/">Adding New Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/">Composing a Search Workflow with the Flow API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input_output/">Inputs and Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crud/">CRUD Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cross_multi_modality/">Multi-modal and Cross-modal Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sparse/">Using Sparse Embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/">Configuring Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/exit/">Exiting a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dump-reload/">Rolling Updates and Query While Indexing in Jina</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation/">Evaluating a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization/">Optimizing a Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ranker/">Ranking Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ranker_trainer/">A guide on Jina Ranker Trainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prevent_duplicate_indexing/">Preventing Duplicate Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incremental_indexing/">Incremental Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel/">Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../batching/">Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../request_size/">Request Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="../remote/">Distributing Jina Remotely</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stress/">Cloud Benchmark &amp; Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../envs/">OS Environment Variables Used in Jina</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/pattern/">Common Design Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autocomplete/">Autocomplete commands on Bash, Zsh and Fish</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core/api_references/">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Dashboard</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/guides/">Developer Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Hub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hub/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hub/guides/">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hub/api_references/">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Jina Box</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../box/introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../box/guides/">Developer Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary/">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/">Contributing to Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/#join-us-on-slack">Join Us on Slack!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE/">Release &amp; Version Identifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Change Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jep/">Jina Enhancement Proposals (JEP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/dev/">FAQ for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/user/">FAQ for End-Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docstring/">Docstring Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../all_exec/">List of 123 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../all_driver/">List of 62 Drivers in Jina</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Jina</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation" class="nav-bar-header">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../core/guides/">Developer Guides</a> &raquo;</li>
        
      <li>Peas and Pods</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  
<div role="search" class="nav-bar-search">
  <form id="rtd-search-form" class="wy-form doc-searchbox" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs (Press / to focus)" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

</div>
<hr/>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="peas-and-pods">
<h1><a class="toc-backref" href="#id2">Peas and Pods</a><a class="headerlink" href="#peas-and-pods" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide assumes you have a basic understanding of Jina, if you haven’t, please check out <a class="reference external" href="https://101.jina.ai">Jina 101</a> first.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide assumes you have a basic understanding of Parallelization inside Jina, if you haven’t, please check out <span class="xref std std-doc">../parallel</span> first.</p>
</div>
<p>You might have already learned from <a class="reference external" href="https://101.jina.ai">Jina 101</a>.
Jina <a class="reference internal" href="../glossary/#term-Pea"><span class="xref std std-term">Pea</span></a> wraps an <a class="reference internal" href="../glossary/#term-Executor"><span class="xref std std-term">Executor</span></a> and lets it exchange data with other Peas.
Jina <a class="reference internal" href="../glossary/#term-Pod"><span class="xref std std-term">Pod</span></a> is a context manager for one or multiple Peas that have the same properties.
It coordinates Peas to improve efficiency and scaling.
It is an abstraction layer on top of Peas equipped with the same Executors allowing the user to reason about the application and design its functionality while hiding the parallelization and the non-functional details.
Beyond that, a Pod adds further control, scheduling, and context management to its Peas.</p>
<p>In this tutorial, we dive deeper into Peas and Pods,
to help you gain in-depth knowledge on the architecture and design principle of Peas and Pods in Jina.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#peas-and-pods" id="id2">Peas and Pods</a></p>
<ul>
<li><p><a class="reference internal" href="#pea-and-pod-explained" id="id3">Pea and Pod Explained</a></p>
<ul>
<li><p><a class="reference internal" href="#singleton-or-not" id="id4">Singleton Or Not?</a></p></li>
<li><p><a class="reference internal" href="#stateless-vs-stateful-pea" id="id5">Stateless vs Stateful Pea</a></p></li>
<li><p><a class="reference internal" href="#how-local-pea-and-remote-pea-interact-with-pod" id="id6">How Local Pea and Remote Pea interact with Pod</a></p></li>
<li><p><a class="reference internal" href="#distributed-remote-peas-in-pod" id="id7">Distributed Remote Peas in Pod</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#an-example" id="id8">An Example</a></p></li>
<li><p><a class="reference internal" href="#what-s-next" id="id9">What’s Next</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pea-and-pod-explained">
<h2><a class="toc-backref" href="#id3">Pea and Pod Explained</a><a class="headerlink" href="#pea-and-pod-explained" title="Permalink to this headline">¶</a></h2>
<div class="section" id="singleton-or-not">
<h3><a class="toc-backref" href="#id4">Singleton Or Not?</a><a class="headerlink" href="#singleton-or-not" title="Permalink to this headline">¶</a></h3>
<p>In Jina, if a Pod only contains only one Pea, we call it a Singleton Pod.
If a user, define <cite>parallel</cite> as 1, then it will be considered as Singleton.
Otherwise, one Pod manages at least two Peas. e.g. <cite>parallel</cite> is at least 2.</p>
<p>In the first case, a Pod only manages a single Pea.
While in the second case, when user specifically defined a <cite>parallel</cite> value greater than 1,
Jina will add a <a class="reference internal" href="../glossary/#term-HeadPea"><span class="xref std std-term">HeadPea</span></a> and <a class="reference internal" href="../glossary/#term-TailPea"><span class="xref std std-term">TailPea</span></a> to the same Pod.
HeadPea distribute traffic to different Peas inside the Pod,
TailPea collects the calculated result from the Peas inside the Pod.</p>
<p>Let’s say we defined <cite>parallel=3</cite> inside a Pod,
then we have 5 Peas inside the Pod.
Traffic first arrives HeadPea, and the HeadPea distributes traffic to the 3 Peas in parallel,
and finally the result will be sent to the TailPea.</p>
<p>Jina offers parallelization at different levels, such as</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parallelization here refers to intra-parallelism.
Check out <span class="xref std std-doc">../parallel/#inter-parallelism&gt;</span> to discover the difference between inter-parallelism and intra-parallelism in Jina.</p>
</div>
<ol class="arabic simple">
<li><p>Local Threads/Process with <cite>BasePea</cite>.</p></li>
<li><p>Inside container with <cite>BasePea</cite> inside <cite>ContainerRuntime</cite>.</p></li>
<li><p>Remotely with <cite>RemotePeas</cite> and <cite>RemotePods</cite> inside <cite>JinadRuntime</cite>.</p></li>
</ol>
<p>Jina Daemon (JinaD) enables Jina to spin up and distribute Peas, Pods, Flows in any system.</p>
</div>
<div class="section" id="stateless-vs-stateful-pea">
<h3><a class="toc-backref" href="#id5">Stateless vs Stateful Pea</a><a class="headerlink" href="#stateless-vs-stateful-pea" title="Permalink to this headline">¶</a></h3>
<p>In the previous section we mentioned <cite>parallel</cite>.
This parameter manages different Peas inside a Pod,
in a stateless fashion.
Since a Pea is a wrap over Jina Executor.
Dependent on the type of the Executor, we consider a Pea is stateless or statefull.</p>
<p>If a Pea wraps an Encoder, Crafter, Segmenter, Ranker, Evaluator, Classifier, we consider it as stateless.
Since this Pea will not persist data.
On the other hand, if a Pea wraps an Indexer, we consider it as stateful.
Because we persist indexed result to our workspace.</p>
<p>We use <cite>parallel</cite> to manage the number of stateless Peas inside a Pod.
We use <cite>shards</cite> to manage the number of stateful Peas inside a Pod.</p>
</div>
<div class="section" id="how-local-pea-and-remote-pea-interact-with-pod">
<h3><a class="toc-backref" href="#id6">How Local Pea and Remote Pea interact with Pod</a><a class="headerlink" href="#how-local-pea-and-remote-pea-interact-with-pod" title="Permalink to this headline">¶</a></h3>
<p>Let’s first think about the case of a Singleton Pod running locally.
This Pod will only have 1 Pea inside, i.e. <cite>parallel=1</cite> or <cite>shard=1</cite>,
depends on the type of Executor it wraps.
The Pea inside the previous Pod will receive traffic from the last Pea,
process the data and send data to the next Pea.</p>
<p>When it comes to a Singleton Pod running remotely (i.e. runs with JinaD),
the main process will setup <cite>JinadRuntime</cite>,
the runtime is going to create remote Peas inside the remote machine.
The JinadRuntime take ownership of 2 tasks:</p>
<ol class="arabic simple">
<li><p>Parse args to JinaD to fire up a remote Pod with a single Pea using <cite>put/pod</cite> API endpoint.</p></li>
<li><p>Streaming logs from the remote Pod to the local Pod.</p></li>
</ol>
<p>The remote Pea inside the remote Pod will process the data,
the result will be send to the next Pea.
In the next section we will talk about the most complex scenario: “distributed Remote Peas in Pod”.</p>
</div>
<div class="section" id="distributed-remote-peas-in-pod">
<h3><a class="toc-backref" href="#id7">Distributed Remote Peas in Pod</a><a class="headerlink" href="#distributed-remote-peas-in-pod" title="Permalink to this headline">¶</a></h3>
<p>In this section, we talk about how multiple Peas (<cite>parallel</cite> or <cite>shards</cite> greater or equal to 2) runs inside a remote Pod.
First of all, the main process will setup <cite>JinadRuntime</cite>.
<cite>JinadRuntime</cite> create a new remote Pod inside the remote machine, with a HeaderPea,
a TailPea and <cite>1</cite> Pea inside the same machine,
the host of the Pea will stay the same as the Pod.</p>
<p>Take a look at the image below.
Imaging we defined <cite>parallel=2</cite> in our Flow/YAML configuration.
Since the current remote machine only has one IP address (<cite>host=0.0.0.3</cite>),
the Jina main process will setup another <cite>JinadRuntime</cite>,
and fire up another Pea inside the second host (<cite>0.0.0.4</cite>),
by calling <cite>put/pea</cite> API endpoint.</p>
<a class="reference internal image-reference" href="../../_images/remote-peas-in-pod.png"><img alt="remote peas in pod" class="align-center" src="../../_images/remote-peas-in-pod.png" style="width: 600px;" /></a>
<p>Then the HeadPea is going to distribute traffic to both Peas.
In the end, the TailPea collects data from Pea1 and Pea2,
and send data to the next Pea.</p>
</div>
</div>
<div class="section" id="an-example">
<h2><a class="toc-backref" href="#id8">An Example</a><a class="headerlink" href="#an-example" title="Permalink to this headline">¶</a></h2>
<p>In the code snippet below, we demonstrate a Flow with three Pods.
The Pod <cite>loader</cite> has one Pea and runs locally.
It send the data to <cite>encoder</cite>, which runs remotely on <cite>0.0.0.2</cite>.
In the end, since <cite>indexer</cite> Pod has two Peas,
Jina will add a <cite>HeadPea</cite> and <cite>TailPea</cite> to this Pod.
Meanwhile, <cite>JinadRuntime</cite> will fire up two Peas based on Pea’s host, such as <cite>0.0.0.4</cite> and <cite>0.0.0.5</cite>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!Flow</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&#39;1.0&#39;</span>
<span class="nt">pods</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">loader</span>
    <span class="nt">uses</span><span class="p">:</span> <span class="kt">!ImageReader</span>
    <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.1</span> <span class="c1"># Singleton pod runs locally</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">encoder</span>
    <span class="nt">uses</span><span class="p">:</span> <span class="kt">!ImageTorchEncoder</span>
    <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.2</span> <span class="c1"># Singleton pod runs remotely</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">indexer</span>
    <span class="nt">uses</span><span class="p">:</span> <span class="kt">!NumpyIndexer</span>
    <span class="nt">shards</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.3</span> <span class="c1"># Pod has multiple peas runs remotely</span>
</pre></div>
</div>
</div>
<div class="section" id="what-s-next">
<h2><a class="toc-backref" href="#id9">What’s Next</a><a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
<p>Thanks for your time &amp; effort while reading this documentation.
If you want to know how we implement Peas and Pods,
please check out the source code <a class="reference external" href="https://github.com/jina-ai/jina/tree/master/jina/peapods">here</a>.</p>
<p>If you still have questions, feel free to <a class="reference external" href="https://github.com/jina-ai/jina/issues">submit an issue</a> or post a message in our <a class="reference external" href="https://docs.jina.ai/chapters/CONTRIBUTING.html#join-us-on-slack">community slack channel</a> .</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        <a href="../extend/driver/" class="btn btn-neutral float-right" title="Adding New Drivers"
           accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
        
        
        <a href="../extend/executor/" class="btn btn-neutral float-left" title="Adding New Executors"
           accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
        
    </div>
    

    <hr/>

    <div role="contentinfo">
        <nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">

            <ul class="devsite-footer-linkboxes-list">

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Stay connected</h3>
                    <ul class="devsite-footer-linkbox-list">

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                <i class="fab fa-github"></i> GitHub

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.linkedin.com/company/jinaai/" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                <i class="fab fa-linkedin"></i> LinkedIn

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://twitter.com/JinaAI_" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-twitter"></i> Twitter

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.youtube.com/c/JinaAI" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                <i class="fab fa-youtube"></i> YouTube

                            </a>

                        </li>

                    </ul>
                </li>

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
                    <ul class="devsite-footer-linkbox-list">
                        <li class="devsite-footer-linkbox-item">

                            <a href="https://slack.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-slack"></i> Slack community

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/issues"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                Issue tracker

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/blob/master/CHANGELOG.md"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                Release notes

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://career.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                Career@Jina AI

                            </a>

                        </li>


                    </ul>
                </li>

            </ul>

        </nav>
        <p>
            
            &copy; Copyright Jina AI Limited. All rights reserved.
            <span class="lastupdated">
        Last updated on Jun 10, 2021.
      </span>

        </p>
    </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });

      function showhide_navbar() {
      var x = document.getElementsByClassName("wy-nav-side")[0];
      var y = document.getElementsByClassName("wy-nav-content-wrap")[0];
      var z = document.getElementById("showhide-navbar-btn");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.style.marginLeft = "300px";
        z.style.left = "300px";
      } else {
        x.style.display = "none";
        y.style.marginLeft = "0";
        z.style.left = "0px";
      }
    }

  </script>

  <!-- Search box becomes active when you press the slash(/) key anywhere on the page-->
  <script>
    const body = document.querySelector('body');
    const searchBox = document.querySelector('form').querySelector('input[type="text"]');

    body.addEventListener('keyup', event => {
      event.preventDefault()
      if (event.key === '/') {
        searchBox.focus();
      }
    });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-164627626-3', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>
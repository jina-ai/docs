

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="X-UA-Compatible" content="IE=edge">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:title" content="Jina Documentation">
<meta property="og:description"
      content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:url" content="https://opensource.jina.ai">
<meta property="og:image" content="../../_static/banner.png">
<meta property="og:type" content="website">
<link rel="icon" href="../../_static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Build Your Pod into a Docker Image &mdash; Jina 0.9.28-master documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/main.css" type="text/css" />


  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Use Your Pod Image" href="use-your-pod.html" />
    <link rel="prev" title="Using Jina Pod with Docker Container" href="index.html" /> 
</head>

<body class="wy-body-for-nav">
  <div id="showhide-navbar-btn" onclick="showhide_navbar();"></div>

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://docs.jina.ai">
          

          
            
            <img src="../../_static/jina-prod-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            

          <div class="dropdown version">
            <button class="dropbtn version">0.9.28-master</button>
            <div class="dropdown-content">
              
              <a class="dropdown-item" href="/master">master</a>
              
              <a class="dropdown-item" href="/v0.9.28-master">0.9.28-master</a>
              
              <a class="dropdown-item" href="/v0.9.21">0.9.21</a>
              
              <a class="dropdown-item" href="/v0.9.20">0.9.20</a>
              
              <a class="dropdown-item" href="/v0.9.19">0.9.19</a>
              
              <a class="dropdown-item" href="/v0.9.18">0.9.18</a>
              
              <a class="dropdown-item" href="/v0.9.17">0.9.17</a>
              
              <a class="dropdown-item" href="/v0.9.16">0.9.16</a>
              
              <a class="dropdown-item" href="/v0.9.15">0.9.15</a>
              
              <a class="dropdown-item" href="/v0.9.14">0.9.14</a>
              
              <a class="dropdown-item" href="/v0.9.13">0.9.13</a>
              
              <a class="dropdown-item" href="/v0.9.12">0.9.12</a>
              
              <a class="dropdown-item" href="/v0.9.11">0.9.11</a>
              
              <a class="dropdown-item" href="/v0.9.10">0.9.10</a>
              
              <a class="dropdown-item" href="/v0.9.9">0.9.9</a>
              
              <a class="dropdown-item" href="/v0.9.8">0.9.8</a>
              
              <a class="dropdown-item" href="/v0.9.7">0.9.7</a>
              
              <a class="dropdown-item" href="/v0.9.6">0.9.6</a>
              
              <a class="dropdown-item" href="/v0.9.5">0.9.5</a>
              
              <a class="dropdown-item" href="/v0.9.3">0.9.3</a>
              
              <a class="dropdown-item" href="/v0.9.2">0.9.2</a>
              
              <a class="dropdown-item" href="/v0.9.1">0.9.1</a>
              
              <a class="dropdown-item" href="/v0.9.0">0.9.0</a>
              
              <a class="dropdown-item" href="/v0.8.22">0.8.22</a>
              
              <a class="dropdown-item" href="/v0.8.21">0.8.21</a>
              
            </div>
          </div>
            
          


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/os/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helloworld/index.html">Jina ‚ÄúHello, World!‚Äù üëãüåç</a></li>
<li class="toctree-l1"><a class="reference internal" href="../101/index.html">Jina 101: First Thing to Learn About Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow/index.html">Using Flow API to Compose Your Jina Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/index.html">Input and Output Functions in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/exit.html">Gracefully Exit Jina</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Jina Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/jina.html">Jina Python API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yaml/index.html">Jina YAML Syntax Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proto/index.html">Jina Protobuf Specification</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../traversal/index.html">Understand Jina Recursive Document Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow/pattern.html">Common Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cross-multi-modality/index.html">Multi &amp; Cross Modality</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using Jina Pod with Docker Container</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build Your Pod into a Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="use-your-pod.html">Use Your Pod Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish-your-pod-image.html">Publish Your Pod Image to Jina Hub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Using Jina Pod Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging/index.html">Logging configuration in jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/index.html">Using Dashboard to Monitor Logs and View Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simple_exec.html">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">uses</span></code> in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restapi/index.html">Jina REST API Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs.html">OS Environment Variables Used in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prevent_duplicate_indexing/index.html">Prevent Indexing Duplicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Extensions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extend/executor.html">Guideline When Adding New Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extend/mwu.html">A Minimum Working Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extend/driver.html">Guideline When Adding New Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="publish-your-pod-image.html">Publish Your Pod Image to Jina Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_schema.html">Jina API Schema for 3rd-Party Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing to Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html#join-us-on-slack">Join Us on Slack!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release &amp; Version Identifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Change Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jep/index.html">Jina Enhancement Proposals (JEP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/dev.html">FAQ for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/user.html">FAQ for End-Users</a></li>
</ul>
<p class="caption"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../all_exec.html">List of 57 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../all_driver.html">List of 63 Drivers in Jina</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Jina</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation" class="nav-bar-header">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Using Jina Pod with Docker Container</a> &raquo;</li>
        
      <li>Build Your Pod into a Docker Image</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  
<div role="search" class="nav-bar-search">
  <form id="rtd-search-form" class="wy-form doc-searchbox" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs (Press / to focus)" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

</div>
<hr/>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="build-your-pod-into-a-docker-image">
<h1>Build Your Pod into a Docker Image<a class="headerlink" href="#build-your-pod-into-a-docker-image" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¬∂</a></h2>
<p>Instead of</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jina pod --uses hub/example/mwu_encoder.yml --port-in <span class="m">55555</span> --port-out <span class="m">55556</span>
</pre></div>
</div>
<p>After this tutorial, you can use the Pod image via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run jinaai/hub.examples.mwu_encoder --port-in <span class="m">55555</span> --port-out <span class="m">55556</span>
</pre></div>
</div>
<p>‚Ä¶or use the Pod image in the Flow API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.flow</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span>
        <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my-encoder&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;jinaai/hub.examples.mwu_encoder&#39;</span><span class="p">,</span> <span class="n">port_in</span><span class="o">=</span><span class="mi">55555</span><span class="p">,</span> <span class="n">port_out</span><span class="o">=</span><span class="mi">55556</span><span class="p">)</span>
        <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my-indexer&#39;</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="s1">&#39;indexer.yml&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>‚Ä¶ or use the Pod image via Jina CLI</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jina pod --uses jinaai/hub.examples.mwu_encoder --port-in <span class="m">55555</span> --port-out <span class="m">55556</span>
</pre></div>
</div>
<p>More information about <a class="reference external" href="./use-your-pod.html#use-your-pod-image">the usage can be found here</a>.</p>
</div>
<div class="section" id="why">
<h2>Why?<a class="headerlink" href="#why" title="Permalink to this headline">¬∂</a></h2>
<p>So you have implemented an awesome executor and want to reuse it in another Jina application, or share it with people in the world. Kind as you are, you want to offer people a ready-to-use interface without hassling them to repeat all steps and pitfalls you have done. The best way is thus to pack everything (python file, YAML config, pre-trained data, dependencies) into a container image and use Jina as the entry point. You can also annotate your image with some meta information to facilitate the search, archive and classification.</p>
<p>Here are a list of reasons that may motivate you to build a Pod image:</p>
<ul class="simple">
<li><p>You want to use one of the built-in executor (e.g. pytorch-based) and you don‚Äôt want to install pytorch dependencies on the host.</p></li>
<li><p>You modify or write a new executor and want to reuse it in another project, without touching <a class="reference external" href="https://github.com/jina-ai/jina/"><code class="docutils literal notranslate"><span class="pre">jina-ai/jina</span></code></a>.</p></li>
<li><p>You customize the driver and want to reuse it in another project, without touching <a class="reference external" href="https://github.com/jina-ai/jina/"><code class="docutils literal notranslate"><span class="pre">jina-ai/jina</span></code></a>.</p></li>
<li><p>You have a self-built library optimized for your architecture (e.g. tensorflow/numpy on GPU/CPU/x64/arm64), and you want this specific Pod to benefit from it.</p></li>
<li><p>Your awesome executor requires certain Linux headers that can only be installed via <code class="docutils literal notranslate"><span class="pre">apt</span></code> or <code class="docutils literal notranslate"><span class="pre">yum</span></code>, but you don‚Äôt have <code class="docutils literal notranslate"><span class="pre">sudo</span></code> on the host.</p></li>
<li><p>You executor relies on a pretrained model, you want to include this 100MB file into the image so that people don‚Äôt need to download it again.</p></li>
<li><p>You use Kubernetes or Docker Swarm and this orchestration framework requires each microservice to run as a Docker container.</p></li>
<li><p>You are using Jina on the cloud and you want to deploy an immutable Pod and version control it.</p></li>
<li><p>You have figured out a set of parameters that works best for an executor, you want to write it down in a YAML config and share it to others.</p></li>
<li><p>You are debugging, doing try-and-error on exploring new packages, and you don‚Äôt want ruin your local dev environments.</p></li>
</ul>
</div>
<div class="section" id="what-should-be-in-the-image">
<h2>What Should be in the Image?<a class="headerlink" href="#what-should-be-in-the-image" title="Permalink to this headline">¬∂</a></h2>
<p>Typically, the following files are packed into the container image:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>File</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Dockerfile</code></td>
<td>describes the dependency setup and expose the entry point;</td>
</tr>
<tr>
<td><code>build.args</code></td>
<td>metadata of the image, author, tags, etc. help the Hub to index and classify your image</td>
</tr>
<tr>
<td><code>*.py</code></td>
<td>describes the executor logic written in Python, if applicable;</td>
</tr>
<tr>
<td><code>*.yml</code></td>
<td>a YAML file describes the executor arguments and configs, if you want users to use your config;</td>
</tr>
<tr>
<td>Other data files</td>
<td>may be required to run the executor, e.g. pre-trained model, fine-tuned model, home-made data.</td>
</tr>
</tbody>
</table><p>Except <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, all others are optional to build a valid Pod image depending on your case. <code class="docutils literal notranslate"><span class="pre">build.args</span></code> is only required when you want to <a class="reference external" href="./publish-your-pod-image.html#publish-your-pod-image-to-jina-hub">upload your image to Jina Hub</a>.</p>
</div>
<div class="section" id="step-by-step-example">
<h2>Step-by-Step Example<a class="headerlink" href="#step-by-step-example" title="Permalink to this headline">¬∂</a></h2>
<p>In this example, we consider the scenario where we creates a new executor and want to reuse it in another project, without touching <a class="reference external" href="https://github.com/jina-ai/jina/"><code class="docutils literal notranslate"><span class="pre">jina-ai/jina</span></code></a>. All files required in this guide is available at <a class="reference external" href="/hub/examples/mwu_encoder"><code class="docutils literal notranslate"><span class="pre">hub/examples/mwu_encoder</span></code></a>.</p>
<div class="section" id="write-your-executor-and-config">
<h3>1. Write Your Executor and Config<a class="headerlink" href="#write-your-executor-and-config" title="Permalink to this headline">¬∂</a></h3>
<p>We write a new dummy encoder named <code class="docutils literal notranslate"><span class="pre">MWUEncoder</span></code> in <a class="reference external" href="hub/examples/mwu_encoder/mwu_encoder.py"><code class="docutils literal notranslate"><span class="pre">mwu_encoder.py</span></code></a> which encodes any input into a random 3-dimensional vector. This encoder has a dummy parameter <code class="docutils literal notranslate"><span class="pre">greetings</span></code> which prints a greeting message on start and on every encode. In <a class="reference external" href="hub/examples/mwu_encoder/mwu_encoder.yml"><code class="docutils literal notranslate"><span class="pre">mwu_encoder.yml</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">metas.py_modules</span></code> tells Jina to load the class of this executor from <code class="docutils literal notranslate"><span class="pre">mwu_encoder.py</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!MWUEncoder</span>
<span class="nt">with</span><span class="p">:</span>
  <span class="nt">greetings</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">im from internal yaml!</span>
<span class="nt">metas</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-mwu-encoder</span>
  <span class="nt">py_modules</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mwu_encoder.py</span>
  <span class="nt">workspace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./</span>
</pre></div>
</div>
<p>The documentations of the YAML syntax <a class="reference external" href="../yaml/yaml.html#executor-yaml-syntax">can be found at here</a>.</p>
</div>
<div class="section" id="write-a-3-line-dockerfile">
<h3>2. Write a 3-Line <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code><a class="headerlink" href="#write-a-3-line-dockerfile" title="Permalink to this headline">¬∂</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> in this example is as simple as three lines,</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span> <span class="s">jinaai/jina</span>

<span class="k">ADD</span> *.py mwu_encoder.yml ./

<span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&quot;jina&quot;</span><span class="p">,</span> <span class="s2">&quot;pod&quot;</span><span class="p">,</span> <span class="s2">&quot;--uses&quot;</span><span class="p">,</span> <span class="s2">&quot;mwu_encoder.yml&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Let‚Äôs now look at these three lines one by one.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span> <span class="s">jinaai/jina</span>
</pre></div>
</div>
<p>In the first line, we choose <code class="docutils literal notranslate"><span class="pre">jinaai/jina</span></code> as <a class="reference external" href="https://docs.docker.com/glossary/#base-image">the base image</a>, which corresponds to the latest master of <a class="reference external" href="https://github.com/jina-ai/jina"><code class="docutils literal notranslate"><span class="pre">jina-ai/jina</span></code></a>. But of course you are free to use others, e.g. <code class="docutils literal notranslate"><span class="pre">tensorflow/tensorflow:nightly-gpu-jupyter</span></code>.</p>
<p>In practice, whether to use Jina base image depends on the dependencies you would like to introduce. For example, someone provides a hard-to-compile package as a Docker image, much harder than compiling/installing Jina itself. In this case, you may want to use this image as the base image to save some troubles. But don‚Äôt forget to install Python &gt;=3.7 (if not included) and Jina afterwards, e.g.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span> <span class="s">awesome-gpu-optimized-kit</span>

<span class="k">RUN</span> pip install jina --no-cache-dir --compile
</pre></div>
</div>
<p>The ways of <a class="reference external" href="https://github.com/jina-ai/jina#run-without-docker">installing Jina can be at found here</a>.</p>
<p>In this example, our dummy <code class="docutils literal notranslate"><span class="pre">MWUEncoder</span></code> only requires Jina and does not need any third-party framework. Thus, <code class="docutils literal notranslate"><span class="pre">jinaai/jina</span></code> is used.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">ADD</span> *.py mwu_encoder.yml ./
</pre></div>
</div>
<p>The second step is to add <em>all</em> necessary files to the image. Typically, Python codes, YAML config and some data files.</p>
<p>In this example, our dummy <code class="docutils literal notranslate"><span class="pre">MWUEncoder</span></code> does not require extra data files.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&quot;jina&quot;</span><span class="p">,</span> <span class="s2">&quot;pod&quot;</span><span class="p">,</span> <span class="s2">&quot;--uses&quot;</span><span class="p">,</span> <span class="s2">&quot;mwu_encoder.yml&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The last step is to specify the entrypoint of this image, usually via <code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span></code>.</p>
<p>In this example, we set <code class="docutils literal notranslate"><span class="pre">mwu_encoder.yml</span></code> as a default YAML config. So if the user later run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run jinaai/hub.examples.mwu_encoder
</pre></div>
</div>
<p>It is equal to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jina pod --uses hub/example/mwu_encoder.yml
</pre></div>
</div>
<p>Any followed key-value arguments after <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">jinaai/hub.examples.mwu_encoder</span></code> will be passed to <code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span></code>. For example,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run jinaai/hub.examples.mwu_encoder --port-in <span class="m">55555</span> --port-out <span class="m">55556</span>
</pre></div>
</div>
<p>It is equal to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jina pod --uses hub/example/mwu_encoder.yml --port-in <span class="m">55555</span> --port-out <span class="m">55556</span>
</pre></div>
</div>
<p>One can also override the internal YAML config by giving an out-of-docker external YAML config via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/hub/example/mwu_encoder_ext.yml:/ext.yml jinaai/hub.examples.mwu_encoder --uses /ext.yml
</pre></div>
</div>
</div>
<div class="section" id="build-the-pod-image">
<h3>3. Build the Pod Image<a class="headerlink" href="#build-the-pod-image" title="Permalink to this headline">¬∂</a></h3>
<p>Now you can build the Pod image via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> hub/example
docker build -t jinaai/hub.examples.mwu_encoder .
</pre></div>
</div>
<p>Depending on whether you want to use the latest Jina image, you may first pull it via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">jinaai/jina</span></code> before the build. For the sake of immutability, <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> will not automatically pull the latest image for you.</p>
<p>Congratulations! You can now re-use this Pod image how ever you want.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        <a href="use-your-pod.html" class="btn btn-neutral float-right" title="Use Your Pod Image"
           accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
        
        
        <a href="index.html" class="btn btn-neutral float-left" title="Using Jina Pod with Docker Container"
           accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
        
    </div>
    

    <hr/>

    <div role="contentinfo">
        <nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">

            <ul class="devsite-footer-linkboxes-list">

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Stay connected</h3>
                    <ul class="devsite-footer-linkbox-list">

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                <i class="fab fa-github"></i> GitHub

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.linkedin.com/company/jinaai/" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                <i class="fab fa-linkedin"></i> LinkedIn

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://twitter.com/JinaAI_" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-twitter"></i> Twitter

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://www.youtube.com/c/JinaAI" class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                <i class="fab fa-youtube"></i> YouTube

                            </a>

                        </li>

                    </ul>
                </li>

                <li class="devsite-footer-linkbox ">
                    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
                    <ul class="devsite-footer-linkbox-list">
                        <li class="devsite-footer-linkbox-item">

                            <a href="https://slack.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">

                                <i class="fab fa-slack"></i> Slack community

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/issues"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">

                                Issue tracker

                            </a>

                        </li>

                        <li class="devsite-footer-linkbox-item">

                            <a href="https://github.com/jina-ai/jina/blob/master/CHANGELOG.md"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">

                                Release notes

                            </a>

                        </li>



                        <li class="devsite-footer-linkbox-item">

                            <a href="https://career.jina.ai"
                               class="devsite-footer-linkbox-link gc-analytics-event"
                               data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">

                                Career@Jina AI

                            </a>

                        </li>


                    </ul>
                </li>

            </ul>

        </nav>
        <p>
            
            &copy; Copyright Jina AI Limited. All rights reserved.
            <span class="lastupdated">
        Last updated on Feb 02, 2021.
      </span>

        </p>
    </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });

      function showhide_navbar() {
      var x = document.getElementsByClassName("wy-nav-side")[0];
      var y = document.getElementsByClassName("wy-nav-content-wrap")[0];
      var z = document.getElementById("showhide-navbar-btn");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.style.marginLeft = "300px";
        z.style.left = "300px";
      } else {
        x.style.display = "none";
        y.style.marginLeft = "0";
        z.style.left = "0px";
      }
    }

  </script>

  <!-- Search box becomes active when you press the slash(/) key anywhere on the page-->
  <script>
    const body = document.querySelector('body');
    const searchBox = document.querySelector('form').querySelector('input[type="text"]');

    body.addEventListener('keyup', event => {
      event.preventDefault()
      if (event.key === '/') {
        searchBox.focus();
      }
    });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-164627626-3', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>